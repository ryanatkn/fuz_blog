import"../chunks/DsnmJJEf.js";import{h as ke,v as De,m as Me,k as ze,p as tt,f as M,d as u,r as i,s as p,J as o,ax as Yt,a5 as re,b,c as et,G as ot,a as $,K as w,t as U,e as W,aD as ie,bn as Ut,bl as Te,Y as ft,Z as Ct,a4 as Ee,a0 as Ot,bo as Pe,X as le,_ as Se,$ as je}from"../chunks/Bg5eBiJM.js";import{s as N}from"../chunks/DUS1pFvU.js";import{i as E}from"../chunks/Da2qmHhJ.js";import{h as Ie}from"../chunks/BhMGZWJA.js";import{a as mt,C as Ae,c as Oe,s as Y,d as ce,b as He,S as Kt,i as de,f as Ft,g as Re,r as Ce}from"../chunks/CqdLfeTn.js";import{r as Fe,p as T}from"../chunks/DDQDc9e9.js";import{k as Le}from"../chunks/YsWS8Uxq.js";import{t as Z,s as Q,b as Ye,a as Ue}from"../chunks/RtWsSydN.js";import{b as Xe}from"../chunks/CWK7Ua5K.js";import{P as Be}from"../chunks/CRX_o-Gm.js";import{i as Ne}from"../chunks/DNLZRdgj.js";import{h as Ht}from"../chunks/D3NHoA5M.js";import{a as st,n as Xt,g as Zt,b as Ge,e as Je,m as Qt,c as Mt,f as Rt,F as Ve}from"../chunks/uugEJAVH.js";import{E as qe}from"../chunks/C7lgd2ss.js";import{s as zt,o as Ke,d as Wt,m as Ze}from"../chunks/D2CV7Ygs.js";import{c as Qe}from"../chunks/BKF7CCEy.js";import{b as We}from"../chunks/Bjjp5sQV.js";function $e(e,t){ke&&De(Me(e)),ze(()=>{var a=t();for(var n in a){var s=a[n];s?e.style.setProperty(n,s):e.style.removeProperty(n)}})}const ta=Qe();function Tt(e,t){const a=+st(e)-+st(t);return a<0?-1:a>0?1:a}function ea(e,t,a){const[n,s]=Xt(a?.in,e,t),r=n.getFullYear()-s.getFullYear(),l=n.getMonth()-s.getMonth();return r*12+l}function aa(e){return t=>{const a=Math.trunc,n=a(t);return n===0?0:n}}function oa(e,t){return+st(e)-+st(t)}function sa(e,t){const a=st(e,t?.in);return a.setHours(23,59,59,999),a}function na(e,t){const a=st(e,t?.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function ra(e,t){const a=st(e,t?.in);return+sa(a,t)==+na(a,t)}function ia(e,t,a){const[n,s,r]=Xt(a?.in,e,e,t),l=Tt(s,r),d=Math.abs(ea(s,r));if(d<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-l*d);let c=Tt(s,r)===-l;ra(n)&&d===1&&Tt(n,r)===1&&(c=!1);const m=l*(d-+c);return m===0?0:m}function la(e,t,a){const n=oa(e,t)/1e3;return aa()(n)}function $t(e,t,a){const n=Ge(),s=a?.locale??n.locale??Je,r=2520,l=Tt(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const d=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:l}),[c,m]=Xt(a?.in,...l>0?[t,e]:[e,t]),h=la(m,c),g=(Zt(m)-Zt(c))/1e3,f=Math.round((h-g)/60);let _;if(f<2)return f===0?s.formatDistance("lessThanXMinutes",1,d):s.formatDistance("xMinutes",f,d);if(f<45)return s.formatDistance("xMinutes",f,d);if(f<90)return s.formatDistance("aboutXHours",1,d);if(f<Qt){const v=Math.round(f/60);return s.formatDistance("aboutXHours",v,d)}else{if(f<r)return s.formatDistance("xDays",1,d);if(f<Mt){const v=Math.round(f/Qt);return s.formatDistance("xDays",v,d)}else if(f<Mt*2)return _=Math.round(f/Mt),s.formatDistance("aboutXMonths",_,d)}if(_=ia(m,c),_<12){const v=Math.round(f/Mt);return s.formatDistance("xMonths",v,d)}else{const v=_%12,x=Math.trunc(_/12);return v<3?s.formatDistance("aboutXYears",x,d):v<9?s.formatDistance("overXYears",x,d):s.formatDistance("almostXYears",x+1,d)}}var ca=M('<span class="animation svelte-eax9wj"><!></span>'),da=M('<button><span class="content svelte-eax9wj"><!></span> <!></button>');function ua(e,t){tt(t,!0);const a=Fe(t,["$$slots","$$events","$$legacy","pending","onclick","running","title","disabled","animation","children","class"]);let n=Yt(void 0);var r={focus:g=>o(n)?.focus(g)},l=da();mt(l,()=>({type:"button",...a,class:`pending_button ${t.class??""}`,disabled:t.disabled??t.pending,title:t.title,onclick:t.onclick,[Ae]:{pending:t.pending}}),void 0,void 0,void 0,"svelte-eax9wj");var d=u(l),c=u(d);N(c,()=>t.children),i(d);var m=p(d,2);{var h=g=>{var f=ca(),_=u(f);{var v=y=>{var P=ot(),I=$(P);N(I,()=>t.animation),b(y,P)},x=y=>{Be(y,{get running(){return t.running}})};E(_,y=>{t.animation?y(v):y(x,!1)})}i(f),b(g,f)};E(m,g=>{t.pending&&g(h)})}return i(l),Xe(l,g=>re(n,g),()=>o(n)),b(e,l),et(r)}var va=M('<div class="content panel p_md mb_lg svelte-wl68el"><!></div>'),_a=M("<details><summary> </summary><!></details>"),fa=M('<div class="mastodon_status_item svelte-wl68el"><header class="svelte-wl68el"><button type="button" class="avatar plain icon_button svelte-wl68el"><img class="icon svelte-wl68el"/></button> <div class="names svelte-wl68el"><div class="name svelte-wl68el"><a> </a></div> <small class="svelte-wl68el"> </small> <small class="date svelte-wl68el"><a class="svelte-wl68el"> </a></small></div></header> <!> <div class="content svelte-wl68el"><!></div></div>');function Lt(e,t){tt(t,!0);const a=w(()=>t.item.created_at),n=w(()=>t.item.edited_at),s=w(()=>t.item.content),r=w(()=>t.item.account),l=w(()=>t.item.url),d=w(()=>t.item.sensitive),c=w(()=>t.item.spoiler_text),m=w(()=>o(r).created_at),h=w(()=>o(r).avatar_static),g=w(()=>o(r).url),f=w(()=>o(r).display_name),_=w(()=>o(r).followers_count),v=w(()=>o(r).following_count),x=w(()=>o(r).acct),y=w(()=>o(r).note),P=w(()=>Rt(new Date(o(m)),"PPpp")),I=w(()=>$t(new Date,new Date(o(a)))),k=w(()=>o(n)?Rt(new Date(o(n)),"PPpp"):null),R=w(()=>o(n)?$t(new Date,new Date(o(n))):null),X=w(()=>Rt(new Date(o(m)),"MMM yyyy"));let A=Yt(!1);const F=()=>{re(A,!o(A))};var O=fa(),L=u(O),S=u(L);S.__click=function(...H){(o(y)?F:void 0)?.apply(this,H)};var G=u(S);i(S);var J=p(S,2),nt=u(J),at=u(nt),ht=u(at,!0);i(at),i(nt);var rt=p(nt,2),gt=u(rt,!0);i(rt);var V=p(rt,2),it=u(V),ut=u(it);i(it),i(V),i(J),i(L);var vt=p(L,2);{var Et=H=>{var C=va(),q=u(C);Ht(q,()=>o(y)),i(C),Z(3,C,()=>Q),b(H,C)};E(vt,H=>{o(A)&&o(y)&&H(Et)})}var lt=p(vt,2),yt=u(lt);{var Pt=H=>{var C=_a(),q=u(C),bt=u(q,!0);i(q);var jt=p(q);Ht(jt,()=>o(s)),i(C),U(()=>W(bt,o(c)||"view sensitive content")),b(H,C)},St=H=>{var C=ot(),q=$(C);Ht(q,()=>o(s)),b(H,C)};E(yt,H=>{o(d)?H(Pt):H(St,!1)})}i(lt),i(O),U(H=>{Y(S,"title",o(y)?`${o(A)?"hide":"show"} ${o(x)}'s profile`:void 0),S.disabled=!o(y),Y(S,"aria-label",o(y)?`${o(A)?"hide":"show"} ${o(x)}'s profile`:void 0),Y(G,"src",o(h)),Y(G,"alt",`avatar for ${o(x)??""}`),Y(at,"href",o(g)),Y(at,"title",H),W(ht,o(f)),Y(rt,"title",`following ${o(v)??""}, ${o(_)??""} followers`),W(gt,o(x)),Y(V,"title",`posted ${o(P)??""}${o(k)?`, edited ${o(k)}`:""}, joined ${o(X)??""}`),Y(it,"href",o(l)),W(ut,`${o(I)??""} ago${o(R)?`, edited ${o(R)} ago`:""}`)},[()=>Oe(o(g),"https://")]),b(e,O),et()}ie(["click"]);var ma=M('<li class="svelte-lw2ink"><!> <!></li>'),ha=M('<ul class="mastodon_status_tree unstyled svelte-lw2ink"></ul>');function ue(e,t){tt(t,!0);const a=w(()=>t.item.id),n=w(()=>t.items.filter(d=>d.in_reply_to_id===o(a)));var s=ot(),r=$(s);{var l=d=>{var c=ha();ce(c,21,()=>o(n),m=>m.id,(m,h)=>{var g=ma(),f=u(g);Lt(f,{get item(){return o(h)}});var _=p(f,2);ue(_,{get item(){return o(h)},get items(){return t.items}}),i(g),b(m,g)}),i(c),b(d,c)};E(r,d=>{o(n).length&&d(l)})}b(e,s),et()}const ga=e=>JSON.stringify(e,(t,a)=>{if(a!==null&&typeof a=="object"&&!Array.isArray(a)){const n={},s=Object.keys(a).sort();for(const r of s)n[r]=a[r];return n}return a}),te="application/vnd.github+json",ya="2022-11-28",Bt=async(e,t)=>{const{request:a,params:n,parse:s,token:r,cache:l,return_early_from_cache:d,log:c,fetch:m=globalThis.fetch}=t??qe,h=typeof e=="string"?new URL(e):e,g=h.href,f=a?.method??(n?"POST":"GET");let _,v;if(l&&(v=pa(g,n,f),_=l.get(v),d&&_))return c?.info("[fetch_value] cached locally and returning early",g),c?.debug("[fetch_value] cached value",_),{ok:!0,value:_.value,headers:ee(_)};const x=a?.body??(f==="GET"||f==="HEAD"?null:JSON.stringify(n??{})),y=new Headers(a?.headers);y.has("accept")||y.set("accept",h.hostname==="api.github.com"?te:"application/json"),y.get("accept")===te&&!y.has("x-github-api-version")&&y.set("x-github-api-version",ya),x&&!y.has("content-type")&&y.set("content-type","application/json"),r&&!y.has("authorization")&&y.set("authorization","Bearer "+r);const P=_?.etag;if(P&&!y.has("if-none-match"))y.set("if-none-match",P);else{const F=_?.last_modified;F&&!y.has("if-modified-since")&&y.set("if-modified-since",F)}const I=new Request(h,{...a,headers:y,method:f,body:x});c?.info("[fetch_value] fetching url with headers",e),c?.debug("[fetch_value] fetching with headers",ba(y));const k=await m(I);if(c?.info("[fetch_value] fetched",e,k.status,wa(k.headers)),c?.debug("[fetch_value] fetched",Object.fromEntries(k.headers.entries())),k.status===429)throw Error("ratelimited exceeded fetching url "+e);if(k.status===304){if(!_)throw Error("unexpected 304 status without a cached value");return c?.info("[fetch_value] cache hit",e),{ok:!0,value:_.value,headers:ee(_)}}if(!k.ok)return{ok:!1,status:k.status,message:k.statusText};const R=k.headers.get("content-type"),X=await(!R||R.includes("json")?k.json():k.text()),A=s?s(X):X;if(c?.debug("[fetch_value] fetched json",e,A),v){const F={key:v,url:g,params:n,value:A,etag:k.headers.get("etag"),last_modified:k.headers.get("etag")?null:k.headers.get("last-modified")};l.set(v,F)}return{ok:!0,value:A,headers:k.headers}},ee=e=>{const t=new Headers;return e.etag&&t.set("etag",e.etag),e.last_modified&&t.set("last-modified",e.last_modified),t},ba=e=>{const t=Object.fromEntries(e.entries());return t.authorization&&(t.authorization="[REDACTED]"),t},wa=e=>{const t=e.get("x-ratelimit-limit"),a=e.get("x-ratelimit-remaining");return t||a?`ratelimit ${a} of ${t}`:""},ve=zt(),xa=Ke({key:ve,url:zt(),params:Wt(),value:Wt(),etag:zt().nullable(),last_modified:zt().nullable()});Ze(ve,xa);const ae="::",pa=(e,t,a)=>{let n=a+ae+e;return t!=null&&(n+=ae+ga(t)),n};class ka extends Error{constructor(t,a=`Unreachable case: ${t}`,n){super(a,n)}}const Da=e=>Array.isArray(e)?e:[e],Ma=(e,t)=>`https://${e}/api/v1/statuses/${t}`,za=(e,t)=>`https://${e}/api/v1/statuses/${t}/context`,Ta=(e,t)=>`https://${e}/api/v1/statuses/${t}/favourited_by`,_e=e=>{try{const t=new URL(e),a=He(t.pathname,"/context").split("/").filter(Boolean),n=a[0]?.[0]==="@"?a[0].substring(1):null;if(!n)return null;const s=a.length>1?a[a.length-1]:null;return s?{href:e,host:t.host,author:n,status_id:s}:null}catch{return null}},Ea=async(e,t,a,n,s,r,l)=>{const d=za(e,t),c=await Bt(d,{request:s,token:r,cache:a,return_early_from_cache:Ut,log:n,fetch:l});return c.ok?c.value:null},Pa=async(e,t,a,n,s,r,l)=>{const d=Ma(e,t),c=await Bt(d,{request:s,token:r,cache:a,return_early_from_cache:Ut,log:n,fetch:l});return c.ok?c.value:null},Sa=async(e,t,a,n,s,r,l)=>{const d=Ta(e,t),c=await Bt(d,{request:s,token:r,cache:a,return_early_from_cache:Ut,log:n,fetch:l});return c.ok?c.value:null},ja=async(e,t,a,n,s)=>{const r=a?Da(a):null,l=t.descendants;if(!l.length||!r?.length)return[];const d=new URL(e.url).host,c=new Set;for(const m of l)for(const h of r)if(h.type==="favourited_by"){if(!m.favourites_count)continue;if((await Sa(d,m.id,n,s))?.find(_=>h.favourited_by.includes(_.acct))){c.add(m.id);break}}else if(h.type==="minimum_favourites"){if(m.favourites_count>=h.minimum_favourites){c.add(m.id);break}}else if(h.type==="custom"){if(h.should_include(m,e,t)){c.add(m.id);break}}else throw new ka(h);return l.filter(m=>c.has(m.id)?m:null)};function Ia(e,t){tt(t,!0);let a=T(t,"include_ancestors",3,!1),n=T(t,"include_replies",3,!1),s=T(t,"loading",15),r=T(t,"item",15),l=T(t,"status_context",15),d=T(t,"replies",15),c=T(t,"load_time",15);const m=w(()=>a()||n()),h=w(()=>t.reply_filter===void 0?n()?{type:"custom",should_include:()=>!0}:null:t.reply_filter),g=async()=>{if(!t.host||!t.id)return;const v=performance.now();s(!0),await(async x=>{var y=Te(x,2);r(y[0]),l(y[1])})(await Promise.all([Pa(t.host,t.id,t.cache,t.log),o(m)?Ea(t.host,t.id,t.cache,t.log):null])),r()&&l()?d(await ja(r(),l(),typeof o(h)=="function"?o(h)(r(),l()):o(h),t.cache,t.log)):d(null),s(!1),c(performance.now()-v)};var f=ot(),_=$(f);N(_,()=>t.children,()=>({item:r(),status_context:l(),replies:d(),load:g,loading:s(),load_time:c()})),b(e,f),et()}const oe=(e,t,a)=>{try{const n=localStorage.getItem(e);if(!n)return t();const s=JSON.parse(n);return a?.(s),s}catch{try{localStorage.removeItem(e)}catch{}return t()}},se=(e,t)=>{try{t===void 0?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t))}catch{}},ne={inform:{color:"var(--text_color_3)",icon:"âœ»"},help:{color:"var(--color_b_5)",icon:"âžº"},error:{color:"var(--color_c_5)",icon:"!?"}};var Aa=M('<div class="icon svelte-9lbevi"><!></div>'),Oa=M('<!> <div class="content svelte-9lbevi"><!></div>',1),Ha=M("<button><!></button>"),Ra=M("<div><!></div>");function Ca(e,t){tt(t,!0);const a=_=>{var v=Oa(),x=$(v);{var y=k=>{var R=Aa(),X=u(R);{var A=O=>{var L=ft();U(()=>W(L,o(c))),b(O,L)},F=O=>{var L=ot(),S=$(L);N(S,()=>t.icon,()=>o(c)),b(O,L)};E(X,O=>{!t.icon||typeof t.icon=="string"?O(A):O(F,!1)})}i(R),b(k,R)};E(x,k=>{t.icon!==null&&k(y)})}var P=p(x,2),I=u(P);N(I,()=>t.children),i(P),b(_,v)},n=T(t,"status",3,"inform"),s=w(()=>ne[n()]),r=w(()=>o(s).color),l=w(()=>o(s).icon),d=w(()=>t.color??o(r)),c=w(()=>typeof t.icon=="string"?t.icon:o(l)??ne.inform.icon);var m=ot(),h=$(m);{var g=_=>{var v=Ha();mt(v,()=>({class:"message",type:"button",onclick:t.onclick,disabled:t.disabled,...t.attrs,[Kt]:{"--text_color":o(d)}}),void 0,void 0,void 0,"svelte-9lbevi");var x=u(v);a(x),i(v),b(_,v)},f=_=>{var v=Ra();mt(v,()=>({role:"alert",class:"message panel",...t.attrs,[Kt]:{"--text_color":o(d)}}),void 0,void 0,void 0,"svelte-9lbevi");var x=u(v);a(x),i(v),b(_,v)};E(h,_=>{t.onclick?_(g):_(f,!1)})}b(e,m),et()}var Fa=M("<div><!></div>"),La=M('<fieldset><div><label title="where to load the toot" class="flex_1 row"><a class="icon_button box mr_lg">ðŸ”—</a> <input/></label></div> <!></fieldset>');function Ya(e,t){tt(t,!0);let a=T(t,"url",15);const n=w(()=>_e(a())),s=w(()=>!!(a()&&!o(n)));var r=La(),l=u(r);let d;var c=u(l),m=u(c);de(m,"",{},{"font-size":"var(--font_size_xl)"});var h=p(m,2),g=v=>v.currentTarget.select();mt(h,()=>({placeholder:"> toot url",onfocus:g,...t.attrs}),void 0,void 0,void 0,void 0,!0),i(c),i(l);var f=p(l,2);{var _=v=>{var x=Fa(),y=u(x);Ca(y,{status:"error",children:(P,I)=>{Ct();var k=ft("invalid Mastodon status url");b(P,k)},$$slots:{default:!0}}),i(x),Z(3,x,()=>Q),b(v,x)};E(f,v=>{o(s)&&v(_)})}i(r),U(()=>{d=Ft(l,1,"row",null,d,{mb_lg:o(s)}),Y(m,"href",a()||void 0)}),Ye(h,a),b(e,r),et()}var Ua=M("<div></div>"),Xa=M('<div class="transition_wrapper svelte-otzyot"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Ba=M('<div class="icon_button_content svelte-otzyot"><div class="icon svelte-otzyot">ðŸ¦£</div> <div class="button_content svelte-otzyot"><div>load toot<!> from</div> <code class="ellipsis"><!></code></div></div>'),Na=M('<div class="transition_wrapper svelte-otzyot"><!></div>'),Ga=M('<div class="pb_md"><a rel="noreferrer" class="display_block panel p_md"><span class="font_family_mono">â†ªï¸Ž</span> reply on Mastodon</a></div>'),Ja=M('<div class="loaded_message svelte-otzyot"> </div>'),Va=M(`<div class="settings controls panel svelte-otzyot"><form class="width_100"><div class="mb_lg"><!></div> <fieldset class="row"><label class="row"><input type="checkbox"/>automatically load when
										scrolled onscreen</label></fieldset></form> <!></div>`),qa=M('<div><div class="toot_content svelte-otzyot"><!> <div class="main_post panel svelte-otzyot"><div class="panel bg_panel svelte-otzyot"><!></div></div> <!></div> <!> <div class="toot_controls svelte-otzyot"><div class="controls svelte-otzyot"><div class="row"><button type="button">settings</button> <div class="reset svelte-otzyot"><button type="button">reset</button><!></div></div></div> <!></div></div>');function Ka(e,t){tt(t,!0);let a=T(t,"updated_url",31,()=>Ee(t.url)),n=T(t,"include_ancestors",3,!1),s=T(t,"include_replies",3,!1),r=T(t,"loading",15),l=T(t,"load_time",15),d=T(t,"initial_show_settings",3,!1),c=T(t,"show_settings",15),m=T(t,"autoload_storage_key",3,"autoload"),h=T(t,"initial_autoload",3,!1),g=T(t,"autoload",23,()=>m()?oe(m(),()=>h()):h()),f=Yt(1);const _=()=>{Pe(f),a(t.url),r(void 0),l(void 0),t.onreset?.()},v=w(()=>t.settings_storage_key&&"show_settings"+t.settings_storage_key);Ot(()=>{c()===void 0&&c(o(v)?oe(o(v),()=>d()):d())}),Ot(()=>{o(v)&&se(o(v),c())});const x=()=>{c(!c())};Ot(()=>{m()&&se(m(),g())});const y=w(()=>_e(a())),P=w(()=>o(y)?.status_id??null),I=w(()=>o(y)?.host??null),k=w(()=>r()!==!1&&!!o(I)),R=w(()=>r()!==void 0||a()!==t.url);var X={reset:_},A=ot(),F=$(A);return Le(F,()=>o(f),O=>{Ia(O,{get host(){return o(I)},get id(){return o(P)},get include_ancestors(){return n()},get include_replies(){return s()},get cache(){return t.cache},get log(){return t.log},get reply_filter(){return t.reply_filter},get loading(){return r()},set loading(S){r(S)},get load_time(){return l()},set load_time(S){l(S)},children:(S,G)=>{let J=()=>G?.().item,nt=()=>G?.().status_context,at=()=>G?.().replies,ht=()=>G?.().load,rt=()=>G?.().loading,gt=()=>G?.().load_time;var V=qa();let it;var ut=u(V),vt=u(ut);{var Et=z=>{var D=Ua();ce(D,21,()=>nt().ancestors,j=>j.id,(j,K)=>{Lt(j,{get item(){return o(K)}})}),i(D),Z(3,D,()=>Q),b(z,D)};E(vt,z=>{n()&&nt()&&z(Et)})}var lt=p(vt,2),yt=u(lt),Pt=u(yt);{var St=z=>{var D=Xa(),j=u(D);$e(j,()=>({"--margin":"0"})),Lt(j.lastChild,{get item(){return J()}}),i(j),i(D),Z(3,D,()=>Q),b(z,D)},H=z=>{var D=Na(),j=u(D);{let K=w(()=>rt()||!1),At=w(()=>!o(k));ua(j,{get pending(){return o(K)},get disabled(){return o(At)},onclick:()=>ht()(),children:(pt,kt)=>{var ct=Ba(),Dt=p(u(ct),2),_t=u(Dt),ye=p(u(_t));{var be=B=>{var dt=ft("s");b(B,dt)};E(ye,B=>{(s()||n())&&B(be)})}Ct(),i(_t);var qt=p(_t,2),we=u(qt);{var xe=B=>{var dt=ft();U(()=>W(dt,o(I))),b(B,dt)},pe=B=>{var dt=ft("invalid url");b(B,dt)};E(we,B=>{o(I)?B(xe):B(pe,!1)})}i(qt),i(Dt),i(ct),b(pt,ct)},$$slots:{default:!0}})}i(D),Z(3,D,()=>Q),b(z,D)};E(Pt,z=>{J()?z(St):z(H,!1)})}i(yt),i(lt);var C=p(lt,2);{var q=z=>{ue(z,{get item(){return J()},get items(){return at()}})};E(C,z=>{J()&&at()&&z(q)})}i(ut);var bt=p(ut,2);{var jt=z=>{var D=Ga(),j=u(D);i(D),U(()=>Y(j,"href",J().url)),Z(3,D,()=>Q),b(z,D)};E(bt,z=>{J()&&z(jt)})}var Nt=p(bt,2),wt=u(Nt),Gt=u(wt),xt=u(Gt);xt.__click=x;let Jt;de(xt,"",{},{"margin-right":"var(--space_sm)"});var Vt=p(xt,2),It=u(Vt);It.__click=_;var fe=p(It);{var me=z=>{var D=Ja(),j=u(D);i(D),U(K=>W(j,`loaded in ${K??""}ms`),[()=>Math.round(gt())]),Z(3,D,()=>Q),b(z,D)};E(fe,z=>{gt()!==void 0&&z(me)})}i(Vt),i(Gt),i(wt),Re(wt,()=>Ne(()=>({onintersect:({intersecting:z})=>{z&&g()&&ht()()},count:1})));var he=p(wt,2);{var ge=z=>{var D=Va(),j=u(D),K=u(j),At=u(K);Ya(At,{get url(){return a()},set url(_t){a(_t)}}),i(K);var pt=p(K,2),kt=u(pt),ct=u(kt);Ce(ct),Ct(),i(kt),i(pt),i(j);var Dt=p(j,2);N(Dt,()=>t.settings??le),i(D),U(()=>Y(kt,"title",g()?"replies will load automatically when scrolled intersect":"replies are not loaded until you request them")),Ue(ct,g),Z(3,D,()=>Q),b(z,D)};E(he,z=>{c()&&z(ge)})}i(Nt),i(V),U(()=>{it=Ft(V,1,"toot svelte-otzyot",null,it,{replies:at()}),Jt=Ft(xt,1,"deselectable",null,Jt,{selected:c()}),It.disabled=!o(R)}),Z(3,V,()=>Q),b(S,V)},$$slots:{default:!0}})}),b(e,A),et(X)}ie(["click"]);var Za=M('<header><h1 class="mt_xl5 mb_lg"> </h1> <p class="mb_xl5"><!></p></header>');function Qa(e,t){tt(t,!0);var a=Za(),n=u(a),s=u(n,!0);i(n);var r=p(n,2),l=u(r);Ve(l,{get item(){return t.item}}),i(r),i(a),U(()=>W(s,t.item.title)),b(e,a),et()}const Wa=e=>{var t=$a();b(e,t)};var $a=M("<hr/>"),to=M("<!>  <section><h2>Comments</h2> <!></section> <!>",1),eo=M("<article><!> <!> <!> <!></article>"),ao=M("<div>cannot find post <code> </code></div>"),oo=M('<div class="blog_post width_upto_md"><!></div>');function so(e,t){tt(t,!0);const a=T(t,"separator",3,Wa),s=We.get().items.find(h=>h.slug===t.post.slug),r=ta.get_maybe();var l=oo();Ie("rbljul",h=>{Se(()=>{je.title=t.post.title??""})});var d=u(l);{var c=h=>{var g=eo();mt(g,()=>({...t.attrs}));var f=u(g);Qa(f,{get item(){return s}});var _=p(f,2);N(_,()=>t.children);var v=p(_,2);N(v,()=>t.footer??le);var x=p(v,2);{var y=P=>{var I=to(),k=$(I);N(k,a);var R=p(k,2),X=p(u(R),2);{var A=O=>{{let L=w(()=>r?.data);Ka(O,{get url(){return s.comments.url},include_replies:!0,initial_autoload:!0,reply_filter:S=>({type:"favourited_by",favourited_by:[S.account.acct]}),get settings_storage_key(){return`${s.id??""}_comments_settings`},get cache(){return o(L)}})}};E(X,O=>{(!r||r.data!==void 0)&&O(A)})}i(R);var F=p(R,2);N(F,a),b(P,I)};E(x,P=>{s.comments&&P(y)})}i(g),b(h,g)},m=h=>{var g=ao(),f=p(u(g)),_=u(f,!0);i(f),i(g),U(()=>W(_,t.post.slug)),b(h,g)};E(d,h=>{s?h(c):h(m,!1)})}i(l),b(e,l),et()}var no=M('<footer class="svelte-3u5v06"><div class="panel p_lg"><p><span>find me on <a href="https://joinmastodon.org/">Mastodon</a> and <a href="https://wikipedia.org/wiki/ActivityPub">ActivityPub</a>:</span> <br/> <a href="https://hci.social/@ryanatkn">@ryanatkn@hci.social</a></p></div></footer>');function ro(e){var t=no();b(e,t)}const io={title:"Hello fuz_blog",slug:"hello-fuz-blog",date_published:"2024-07-10T16:04:49.688Z",date_modified:"2024-07-15T18:27:36.477Z",summary:"fuz_blog is now a reusable library",tags:["blog software","sveltekit"],comments:{url:"https://fosstodon.org/@ryanatkn/114422499177310600",type:"mastodon"}};var lo=M(`<section><p>This is <code>fuz_blog</code>'s first blog post. <code>fuz_blog</code> is a reusable SvelteKit library for adding blogs to your repos. It works!</p> <p>The source code is <a href="https://github.com/fuzdev/fuz_blog">here on GitHub</a>.</p> <p>To watch me create this project from an older messier codebase, see this <a href="https://www.youtube.com/watch?v=j1qTO5xolC4&amp;list=PLio_5jgyVNVm0nMXojbEP7vQOEakA8n4X&amp;index=1">video and playlist</a>. The code is at <a href="https://github.com/fuzdev/fuz_blog/pull/1">PR #1</a>.</p></section>`);function Eo(e){so(e,{get post(){return io},footer:a=>{ro(a)},children:(a,n)=>{var s=lo();b(a,s)},$$slots:{footer:!0,default:!0}})}export{Eo as component};
