import"../chunks/DsnmJJEf.js";import{F as he,G as jt,T as Ot,be as At,a1 as zt,W as Ct,a2 as de,a4 as Ft,J as Ht,a3 as Rt,a6 as Lt,P as Yt,R as Bt,D as Xe,bf as dt,A as Nt,m as ut,bg as Ut,p as Q,f as E,d as v,r as f,s as M,a8 as s,aB as Ve,ah as ft,b,c as $,aa as oe,a as W,a9 as w,t as Y,e as Z,aY as vt,b8 as qe,bh as Xt,ab as me,ac as Be,ag as Vt,u as Fe,bi as qt,X as _t,b9 as Gt,bd as Jt}from"../chunks/DHgLA0dU.js";import{s as V}from"../chunks/B4_GM2gq.js";import{i as S}from"../chunks/CotXsD3W.js";import{a as ge,C as Kt,d as Zt,s as L,b as mt,f as Wt,S as $e,g as ht,r as gt,c as Ne}from"../chunks/C9r3yuSq.js";import{p as I}from"../chunks/BZ6aNKs8.js";import{P as Qt,a as $t}from"../chunks/Cg1XtqrR.js";import{t as J,s as K}from"../chunks/5HQdK4jl.js";import{b as ea}from"../chunks/BpEh1T2k.js";import{h as He}from"../chunks/mlroBlWy.js";import{a as re,n as Ge,g as et,b as ta,e as aa,m as tt,c as Ee,f as Re,F as na}from"../chunks/Ek2n0qwN.js";import{s as Te,o as sa,a as at,m as oa}from"../chunks/C-_V8m2x.js";import{c as ra,b as ia}from"../chunks/mp90wtER.js";function la(t,e,a){he&&jt();var o=t,n=Rt,r,c,i=null,l=At;function _(){r&&Lt(r),i!==null&&(i.lastChild.remove(),o.before(i),i=null),r=c}Ot(()=>{if(l(n,n=e())){var u=o,g=Ft();g&&(i=document.createDocumentFragment(),i.append(u=zt())),c=Ct(()=>a(u)),g?de.add_callback(_):_()}}),he&&(o=Ht)}function ca(t,e){he&&Yt(Bt(t)),Xe(()=>{var a=e();for(var o in a){var n=a[o];n?t.style.setProperty(o,n):t.style.removeProperty(o)}})}function da(t,e,a=e){var o=new WeakSet;dt(t,"input",async n=>{var r=n?t.defaultValue:t.value;if(r=Le(t)?Ye(r):r,a(r),de!==null&&o.add(de),await Nt(),r!==(r=e())){var c=t.selectionStart,i=t.selectionEnd;t.value=r??"",i!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(i,t.value.length))}}),(he&&t.defaultValue!==t.value||ut(e)==null&&t.value)&&(a(Le(t)?Ye(t.value):t.value),de!==null&&o.add(de)),Xe(()=>{var n=e();if(t===document.activeElement){var r=Ut??de;if(o.has(r))return}Le(t)&&n===Ye(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function ua(t,e,a=e){dt(t,"change",o=>{var n=o?t.defaultChecked:t.checked;a(n)}),(he&&t.defaultChecked!==t.checked||ut(e)==null)&&a(t.checked),Xe(()=>{var o=e();t.checked=!!o})}function Le(t){var e=t.type;return e==="number"||e==="range"}function Ye(t){return t===""?null:+t}const fa=ra();function Ie(t,e){const a=+re(t)-+re(e);return a<0?-1:a>0?1:a}function va(t,e,a){const[o,n]=Ge(a?.in,t,e),r=o.getFullYear()-n.getFullYear(),c=o.getMonth()-n.getMonth();return r*12+c}function _a(t){return e=>{const a=Math.trunc,o=a(e);return o===0?0:o}}function ma(t,e){return+re(t)-+re(e)}function ha(t,e){const a=re(t,e?.in);return a.setHours(23,59,59,999),a}function ga(t,e){const a=re(t,e?.in),o=a.getMonth();return a.setFullYear(a.getFullYear(),o+1,0),a.setHours(23,59,59,999),a}function ba(t,e){const a=re(t,e?.in);return+ha(a,e)==+ga(a,e)}function ya(t,e,a){const[o,n,r]=Ge(a?.in,t,t,e),c=Ie(n,r),i=Math.abs(va(n,r));if(i<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-c*i);let l=Ie(n,r)===-c;ba(o)&&i===1&&Ie(o,r)===1&&(l=!1);const _=c*(i-+l);return _===0?0:_}function wa(t,e,a){const o=ma(t,e)/1e3;return _a()(o)}function nt(t,e,a){const o=ta(),n=a?.locale??o.locale??aa,r=2520,c=Ie(t,e);if(isNaN(c))throw new RangeError("Invalid time value");const i=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:c}),[l,_]=Ge(a?.in,...c>0?[e,t]:[t,e]),u=wa(_,l),g=(et(_)-et(l))/1e3,h=Math.round((u-g)/60);let d;if(h<2)return h===0?n.formatDistance("lessThanXMinutes",1,i):n.formatDistance("xMinutes",h,i);if(h<45)return n.formatDistance("xMinutes",h,i);if(h<90)return n.formatDistance("aboutXHours",1,i);if(h<tt){const m=Math.round(h/60);return n.formatDistance("aboutXHours",m,i)}else{if(h<r)return n.formatDistance("xDays",1,i);if(h<Ee){const m=Math.round(h/tt);return n.formatDistance("xDays",m,i)}else if(h<Ee*2)return d=Math.round(h/Ee),n.formatDistance("aboutXMonths",d,i)}if(d=ya(_,l),d<12){const m=Math.round(h/Ee);return n.formatDistance("xMonths",m,i)}else{const m=d%12,x=Math.trunc(d/12);return m<3?n.formatDistance("aboutXYears",x,i):m<9?n.formatDistance("overXYears",x,i):n.formatDistance("almostXYears",x+1,i)}}var xa=E('<span class="animation svelte-cvss5b"><!></span>'),ka=E('<button><span class="content svelte-cvss5b"><!></span> <!></button>');function Da(t,e){Q(e,!0);let a=Ve(void 0);var n={focus:u=>s(a)?.focus(u)},r=ka();ge(r,u=>({type:"button",...e.attrs,disabled:e.disabled??e.attrs?.disabled??e.pending,title:e.title??e.attrs?.title,onclick:e.onclick,[Kt]:u}),[()=>({pending:e.pending})],void 0,"svelte-cvss5b");var c=v(r),i=v(c);V(i,()=>e.children),f(c);var l=M(c,2);{var _=u=>{var g=xa(),h=v(g);{var d=x=>{var y=oe(),T=W(y);V(T,()=>e.animation),b(x,y)},m=x=>{Qt(x,{get running(){return e.running}})};S(h,x=>{e.animation?x(d):x(m,!1)})}f(g),b(u,g)};S(l,u=>{e.pending&&u(_)})}return f(r),ea(r,u=>ft(a,u),()=>s(a)),b(t,r),$(n)}const Ma=(t,e)=>{let a,o,n,r,c,i,l,_;const u=d=>{_=d,i=0,typeof d=="function"?(a=d,o=void 0,n=void 0,r=void 0):d&&(a=d.onintersect,o=d.ondisconnect,n=d.count,r=d.options),g()},g=()=>{l&&h(),!(_===null||n===0)&&(l=new IntersectionObserver(d=>{c=d[0].isIntersecting,a&&l&&a({intersecting:c,intersections:i,el:t,observer:l,disconnect:h}),c?i++:n&&n>0&&i>=n&&h()},r),l.observe(t))},h=()=>{l&&(l.disconnect(),o&&o({intersecting:c,intersections:i,el:t,observer:l}),l=null)};return u(e),{update:d=>{u(d)},destroy:h}};var pa=E('<div class="content panel p_md mb_lg svelte-1nc1gfs"><!></div>'),Ea=E("<details><summary> </summary><!></details>"),Ta=E('<div class="mastodon_status_item svelte-1nc1gfs"><header class="svelte-1nc1gfs"><button type="button" class="avatar plain icon_button svelte-1nc1gfs"><img class="icon svelte-1nc1gfs"/></button> <div class="names svelte-1nc1gfs"><div class="name svelte-1nc1gfs"><a> </a></div> <small class="svelte-1nc1gfs"> </small> <small class="date svelte-1nc1gfs"><a class="svelte-1nc1gfs"> </a></small></div></header> <!> <div class="content svelte-1nc1gfs"><!></div></div>');function Ue(t,e){Q(e,!0);const a=w(()=>e.item.created_at),o=w(()=>e.item.edited_at),n=w(()=>e.item.content),r=w(()=>e.item.account),c=w(()=>e.item.url),i=w(()=>e.item.sensitive),l=w(()=>e.item.spoiler_text),_=w(()=>s(r).created_at),u=w(()=>s(r).avatar_static),g=w(()=>s(r).url),h=w(()=>s(r).display_name),d=w(()=>s(r).followers_count),m=w(()=>s(r).following_count),x=w(()=>s(r).acct),y=w(()=>s(r).note),T=w(()=>Re(new Date(s(_)),"PPpp")),B=w(()=>nt(new Date,new Date(s(a)))),p=w(()=>s(o)?Re(new Date(s(o)),"PPpp"):null),z=w(()=>s(o)?nt(new Date,new Date(s(o))):null),N=w(()=>Re(new Date(s(_)),"MMM yyyy"));let C=Ve(!1);const R=()=>{ft(C,!s(C))};var F=Ta(),j=v(F),P=v(j);P.__click=function(...A){(s(y)?R:void 0)?.apply(this,A)};var q=v(P);f(P);var ue=M(P,2),ee=v(ue),te=v(ee),Se=v(te,!0);f(te),f(ee);var ae=M(ee,2),ne=v(ae,!0);f(ae);var ie=M(ae,2),se=v(ie),be=v(se);f(se),f(ie),f(ue),f(j);var ye=M(j,2);{var fe=A=>{var H=pa(),U=v(H);He(U,()=>s(y)),f(H),J(3,H,()=>K),b(A,H)};S(ye,A=>{s(C)&&s(y)&&A(fe)})}var ve=M(ye,2),Pe=v(ve);{var je=A=>{var H=Ea(),U=v(H),Ae=v(U,!0);f(U);var we=M(U);He(we,()=>s(n)),f(H),Y(()=>Z(Ae,s(l)||"view sensitive content")),b(A,H)},Oe=A=>{var H=oe(),U=W(H);He(U,()=>s(n)),b(A,H)};S(Pe,A=>{s(i)?A(je):A(Oe,!1)})}f(ve),f(F),Y(A=>{L(P,"title",s(y)?`${s(C)?"hide":"show"} ${s(x)}'s profile`:void 0),P.disabled=!s(y),L(P,"aria-label",s(y)?`${s(C)?"hide":"show"} ${s(x)}'s profile`:void 0),L(q,"src",s(u)),L(q,"alt",`avatar for ${s(x)??""}`),L(te,"href",s(g)),L(te,"title",A),Z(Se,s(h)),L(ae,"title",`following ${s(m)??""}, ${s(d)??""} followers`),Z(ne,s(x)),L(ie,"title",`posted ${s(T)??""}${s(p)?`, edited ${s(p)}`:""}, joined ${s(N)??""}`),L(se,"href",s(c)),Z(be,`${s(B)??""} ago${s(z)?`, edited ${s(z)} ago`:""}`)},[()=>Zt(s(g),"https://")]),b(t,F),$()}vt(["click"]);var Ia=E('<li class="svelte-7gwsg1"><!> <!></li>'),Sa=E('<ul class="mastodon_status_tree unstyled svelte-7gwsg1"></ul>');function bt(t,e){Q(e,!0);const a=w(()=>e.item.id),o=w(()=>e.items.filter(i=>i.in_reply_to_id===s(a)));var n=oe(),r=W(n);{var c=i=>{var l=Sa();mt(l,21,()=>s(o),_=>_.id,(_,u)=>{var g=Ia(),h=v(g);Ue(h,{get item(){return s(u)}});var d=M(h,2);bt(d,{get item(){return s(u)},get items(){return e.items}}),f(g),b(_,g)}),f(l),b(i,l)};S(r,i=>{s(o).length&&i(c)})}b(t,n),$()}const Pa=t=>t?t.constructor===Object||t.constructor===void 0:!1,ja=Object.freeze({}),yt=t=>!t||!Pa(t)?t:Object.fromEntries(Object.entries(t).sort((e,a)=>e[0]>a[0]?1:-1).map(([e,a])=>[e,yt(a)])),st="application/vnd.github+json",Oa="2022-11-28",Je=async(t,e)=>{const{request:a,params:o,parse:n,token:r,cache:c,return_early_from_cache:i,log:l,fetch:_=globalThis.fetch}=e??ja,u=typeof t=="string"?new URL(t):t,g=u.href,h=a?.method??(o?"POST":"GET");let d,m;if(c&&(m=Fa(g,o,h),d=c.get(m),i&&d))return l?.info("[fetch_value] cached locally and returning early",g),l?.debug("[fetch_value] cached value",d),{ok:!0,value:d.value,headers:ot(d)};const x=a?.body??(h==="GET"||h==="HEAD"?null:JSON.stringify(o??{})),y=new Headers(a?.headers);y.has("accept")||y.set("accept",u.hostname==="api.github.com"?st:"application/json"),y.get("accept")===st&&!y.has("x-github-api-version")&&y.set("x-github-api-version",Oa),x&&!y.has("content-type")&&y.set("content-type","application/json"),r&&!y.has("authorization")&&y.set("authorization","Bearer "+r);const T=d?.etag;if(T&&!y.has("if-none-match"))y.set("if-none-match",T);else{const R=d?.last_modified;R&&!y.has("if-modified-since")&&y.set("if-modified-since",R)}const B=new Request(u,{...a,headers:y,method:h,body:x});l?.info("[fetch_value] fetching url with headers",t),l?.debug("[fetch_value] fetching with headers",Aa(y));const p=await _(B);if(l?.info("[fetch_value] fetched",t,p.status,za(p.headers)),l?.debug("[fetch_value] fetched",Object.fromEntries(p.headers.entries())),p.status===429)throw Error("ratelimited exceeded fetching url "+t);if(p.status===304){if(!d)throw Error("unexpected 304 status without a cached value");return l?.info("[fetch_value] cache hit",t),{ok:!0,value:d.value,headers:ot(d)}}if(!p.ok)return{ok:!1,status:p.status,message:p.statusText};const z=p.headers.get("content-type"),N=await(!z||z.includes("json")?p.json():p.text()),C=n?n(N):N;if(l?.debug("[fetch_value] fetched json",t,C),m){const R={key:m,url:g,params:o,value:C,etag:p.headers.get("etag"),last_modified:p.headers.get("etag")?null:p.headers.get("last-modified")};c.set(m,R)}return{ok:!0,value:C,headers:p.headers}},ot=t=>{const e=new Headers;return t.etag&&e.set("etag",t.etag),t.last_modified&&e.set("last-modified",t.last_modified),e},Aa=t=>{const e=Object.fromEntries(t.entries());return e.authorization&&(e.authorization="[REDACTED]"),e},za=t=>{const e=t.get("x-ratelimit-limit"),a=t.get("x-ratelimit-remaining");return e||a?`ratelimit ${a} of ${e}`:""},wt=Te(),Ca=sa({key:wt,url:Te(),params:at(),value:at(),etag:Te().nullable(),last_modified:Te().nullable()});oa(wt,Ca);const rt="::",Fa=(t,e,a)=>{let o=a+rt+t;return e!=null&&(o+=rt+JSON.stringify(yt(e))),o};class Ha extends Error{constructor(e,a=`Unreachable case: ${e}`,o){super(a,o)}}const Ra=t=>Array.isArray(t)?t:[t],La=(t,e)=>`https://${t}/api/v1/statuses/${e}`,Ya=(t,e)=>`https://${t}/api/v1/statuses/${e}/context`,Ba=(t,e)=>`https://${t}/api/v1/statuses/${e}/favourited_by`,xt=t=>{try{const e=new URL(t),a=Wt(e.pathname,"/context").split("/").filter(Boolean),o=a[0][0]==="@"?a[0].substring(1):null;if(!o)return null;const n=a.length>1?a[a.length-1]:null;return n?{href:t,host:e.host,author:o,status_id:n}:null}catch{return null}},Na=async(t,e,a,o,n,r,c)=>{const i=Ya(t,e),l=await Je(i,{request:n,token:r,cache:a,return_early_from_cache:qe,log:o,fetch:c});return l.ok?l.value:null},Ua=async(t,e,a,o,n,r,c)=>{const i=La(t,e),l=await Je(i,{request:n,token:r,cache:a,return_early_from_cache:qe,log:o,fetch:c});return l.ok?l.value:null},Xa=async(t,e,a,o,n,r,c)=>{const i=Ba(t,e),l=await Je(i,{request:n,token:r,cache:a,return_early_from_cache:qe,log:o,fetch:c});return l.ok?l.value:null},Va=async(t,e,a,o,n)=>{const r=a?Ra(a):null,c=e.descendants;if(!c.length||!r?.length)return[];const i=new URL(t.url).host,l=new Set;for(const _ of c)for(const u of r)if(u.type==="favourited_by"){if(!_.favourites_count)continue;if((await Xa(i,_.id,o,n))?.find(d=>u.favourited_by.includes(d.acct))){l.add(_.id);break}}else if(u.type==="minimum_favourites"){if(_.favourites_count>=u.minimum_favourites){l.add(_.id);break}}else if(u.type==="custom"){if(u.should_include(_,t,e)){l.add(_.id);break}}else throw new Ha(u);return c.filter(_=>l.has(_.id)?_:null)};function qa(t,e){Q(e,!0);let a=I(e,"include_ancestors",3,!1),o=I(e,"include_replies",3,!1),n=I(e,"loading",15),r=I(e,"item",15),c=I(e,"status_context",15),i=I(e,"replies",15),l=I(e,"load_time",15);const _=w(()=>a()||o()),u=w(()=>e.reply_filter===void 0?o()?{type:"custom",should_include:()=>!0}:null:e.reply_filter),g=async()=>{if(!e.host||!e.id)return;const m=performance.now();n(!0),await(async x=>{var y=Xt(x,2);r(y[0]),c(y[1])})(await Promise.all([Ua(e.host,e.id,e.cache,e.log),s(_)?Na(e.host,e.id,e.cache,e.log):null])),r()&&c()?i(await Va(r(),c(),typeof s(u)=="function"?s(u)(r(),c()):s(u),e.cache,e.log)):i(null),n(!1),l(performance.now()-m)};var h=oe(),d=W(h);V(d,()=>e.children,()=>({item:r(),status_context:c(),replies:i(),load:g,loading:n(),load_time:l()})),b(t,h),$()}const it=(t,e,a)=>{try{const o=localStorage.getItem(t);if(!o)return e();const n=JSON.parse(o);return a?.(n),n}catch{try{localStorage.removeItem(t)}catch{}return e()}},lt=(t,e)=>{try{e===void 0?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e))}catch{}},ct={inform:{color:"var(--text_color_3)",icon:"✻"},help:{color:"var(--color_b_5)",icon:"➺"},error:{color:"var(--color_c_5)",icon:"!?"}};var Ga=E('<div class="icon svelte-jpgxud"><!></div>'),Ja=E('<!> <div class="content svelte-jpgxud"><!></div>',1),Ka=E("<button><!></button>"),Za=E("<div><!></div>");function Wa(t,e){Q(e,!0);const a=d=>{var m=Ja(),x=W(m);{var y=p=>{var z=Ga(),N=v(z);{var C=F=>{var j=me();Y(()=>Z(j,s(l))),b(F,j)},R=F=>{var j=oe(),P=W(j);V(P,()=>e.icon,()=>s(l)),b(F,j)};S(N,F=>{!e.icon||typeof e.icon=="string"?F(C):F(R,!1)})}f(z),b(p,z)};S(x,p=>{e.icon!==null&&p(y)})}var T=M(x,2),B=v(T);V(B,()=>e.children),f(T),b(d,m)},o=I(e,"status",3,"inform"),n=w(()=>ct[o()]),r=w(()=>s(n).color),c=w(()=>s(n).icon),i=w(()=>e.color??s(r)),l=w(()=>typeof e.icon=="string"?e.icon:s(c)??ct.inform.icon);var _=oe(),u=W(_);{var g=d=>{var m=Ka();ge(m,y=>({class:"message",type:"button",onclick:e.onclick,disabled:e.disabled,...e.attrs,[$e]:y}),[()=>({"--text_color":s(i)})],void 0,"svelte-jpgxud");var x=v(m);a(x),f(m),b(d,m)},h=d=>{var m=Za();ge(m,y=>({role:"alert",class:"message panel",...e.attrs,[$e]:y}),[()=>({"--text_color":s(i)})],void 0,"svelte-jpgxud");var x=v(m);a(x),f(m),b(d,m)};S(u,d=>{e.onclick?d(g):d(h,!1)})}b(t,_),$()}var Qa=E("<div><!></div>"),$a=E('<fieldset><div><label title="where to load the toot" class="flex_1 row"><a class="icon_button box mr_lg">🔗</a> <input/></label></div> <!></fieldset>');function en(t,e){Q(e,!0);let a=I(e,"url",15);const o=w(()=>xt(a())),n=w(()=>!!(a()&&!s(o)));var r=$a(),c=v(r);let i;var l=v(c),_=v(l);ht(_,"",{},{"font-size":"var(--font_size_xl)"});var u=M(_,2);gt(u);var g=m=>m.currentTarget.select();ge(u,()=>({placeholder:"> toot url",onfocus:g,...e.attrs})),f(l),f(c);var h=M(c,2);{var d=m=>{var x=Qa(),y=v(x);Wa(y,{status:"error",children:(T,B)=>{Be();var p=me("invalid Mastodon status url");b(T,p)},$$slots:{default:!0}}),f(x),J(3,x,()=>K),b(m,x)};S(h,m=>{s(n)&&m(d)})}f(r),Y(m=>{i=Ne(c,1,"row",null,i,m),L(_,"href",a()||void 0)},[()=>({mb_lg:s(n)})]),da(u,a),b(t,r),$()}const tn=(t,e)=>{e(!e())};var an=E("<div></div>"),nn=E('<div class="transition_wrapper svelte-esn2at"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),sn=E('<div class="icon_button_content svelte-esn2at"><div class="icon svelte-esn2at">🦣</div> <div class="button_content svelte-esn2at"><div>load toot<!> from</div> <code class="ellipsis"><!></code></div></div>'),on=E('<div class="transition_wrapper svelte-esn2at"><!></div>'),rn=E('<div class="pb_md"><a rel="noreferrer" class="display_block panel p_md"><span class="font_family_mono">↪︎</span> reply on Mastodon</a></div>'),ln=E('<div class="loaded_message svelte-esn2at"> </div>'),cn=E(`<div class="settings controls panel svelte-esn2at"><form class="w_100"><div class="mb_lg"><!></div> <fieldset class="row"><label class="row"><input type="checkbox"/>automatically load when
										scrolled onscreen</label></fieldset></form> <!></div>`),dn=E('<div><div class="toot_content svelte-esn2at"><!> <div class="main_post panel svelte-esn2at"><div class="panel bg_panel svelte-esn2at"><!></div></div> <!></div> <!> <div class="toot_controls svelte-esn2at"><div class="controls svelte-esn2at"><div class="row"><button type="button">settings</button> <div class="reset svelte-esn2at"><button type="button">reset</button><!></div></div></div> <!></div></div>');function un(t,e){Q(e,!0);let a=I(e,"updated_url",31,()=>Vt(e.url)),o=I(e,"include_ancestors",3,!1),n=I(e,"include_replies",3,!1),r=I(e,"loading",15),c=I(e,"load_time",15),i=I(e,"initial_show_settings",3,!1),l=I(e,"show_settings",15),_=I(e,"autoload_storage_key",3,"autoload"),u=I(e,"initial_autoload",3,!1),g=I(e,"autoload",23,()=>_()?it(_(),()=>u()):u()),h=Ve(1);const d=()=>{qt(h),a(e.url),r(void 0),c(void 0),e.onreset?.()},m=w(()=>e.settings_storage_key&&"show_settings"+e.settings_storage_key);Fe(()=>{l()===void 0&&l(s(m)?it(s(m),()=>i()):i())}),Fe(()=>{s(m)&&lt(s(m),l())}),Fe(()=>{_()&&lt(_(),g())});const x=w(()=>xt(a())),y=w(()=>s(x)?.status_id??null),T=w(()=>s(x)?.host??null),B=w(()=>r()!==!1&&!!s(T)),p=w(()=>r()!==void 0||a()!==e.url);var z={reset:d},N=oe(),C=W(N);return la(C,()=>s(h),R=>{qa(R,{get host(){return s(T)},get id(){return s(y)},get include_ancestors(){return o()},get include_replies(){return n()},get cache(){return e.cache},get log(){return e.log},get reply_filter(){return e.reply_filter},get loading(){return r()},set loading(j){r(j)},get load_time(){return c()},set load_time(j){c(j)},children:(j,P)=>{let q=()=>P?.().item,ue=()=>P?.().status_context,ee=()=>P?.().replies,te=()=>P?.().load,Se=()=>P?.().loading,ae=()=>P?.().load_time;var ne=dn();let ie;var se=v(ne),be=v(se);{var ye=D=>{var k=an();mt(k,21,()=>ue().ancestors,O=>O.id,(O,G)=>{Ue(O,{get item(){return s(G)}})}),f(k),J(3,k,()=>K),b(D,k)};S(be,D=>{o()&&ue()&&D(ye)})}var fe=M(be,2),ve=v(fe),Pe=v(ve);{var je=D=>{var k=nn(),O=v(k);ca(O,()=>({"--margin":"0"})),Ue(O.lastChild,{get item(){return q()}}),f(O),f(k),J(3,k,()=>K),b(D,k)},Oe=D=>{var k=on(),O=v(k);{let G=w(()=>Se()||!1),Ce=w(()=>!s(B));Da(O,{get pending(){return s(G)},get disabled(){return s(Ce)},onclick:()=>te()(),children:(De,Me)=>{var le=sn(),pe=M(v(le),2),_e=v(pe),Et=M(v(_e));{var Tt=X=>{var ce=me("s");b(X,ce)};S(Et,X=>{(n()||o())&&X(Tt)})}Be(),f(_e);var Qe=M(_e,2),It=v(Qe);{var St=X=>{var ce=me();Y(()=>Z(ce,s(T))),b(X,ce)},Pt=X=>{var ce=me("invalid url");b(X,ce)};S(It,X=>{s(T)?X(St):X(Pt,!1)})}f(Qe),f(pe),f(le),b(De,le)},$$slots:{default:!0}})}f(k),J(3,k,()=>K),b(D,k)};S(Pe,D=>{q()?D(je):D(Oe,!1)})}f(ve),f(fe);var A=M(fe,2);{var H=D=>{bt(D,{get item(){return q()},get items(){return ee()}})};S(A,D=>{q()&&ee()&&D(H)})}f(se);var U=M(se,2);{var Ae=D=>{var k=rn(),O=v(k);f(k),Y(()=>L(O,"href",q().url)),J(3,k,()=>K),b(D,k)};S(U,D=>{q()&&D(Ae)})}var we=M(U,2),xe=v(we),Ke=v(xe),ke=v(Ke);ke.__click=[tn,l];let Ze;ht(ke,"",{},{"margin-right":"var(--space_sm)"});var We=M(ke,2),ze=v(We);ze.__click=d;var kt=M(ze);{var Dt=D=>{var k=ln(),O=v(k);f(k),Y(G=>Z(O,`loaded in ${G??""}ms`),[()=>Math.round(ae())]),J(3,k,()=>K),b(D,k)};S(kt,D=>{ae()!==void 0&&D(Dt)})}f(We),f(Ke),f(xe),$t(xe,(D,k)=>Ma?.(D,k),()=>({onintersect:({intersecting:D})=>{D&&g()&&te()()},count:1}));var Mt=M(xe,2);{var pt=D=>{var k=cn(),O=v(k),G=v(O),Ce=v(G);en(Ce,{get url(){return a()},set url(_e){a(_e)}}),f(G);var De=M(G,2),Me=v(De),le=v(Me);gt(le),Be(),f(Me),f(De),f(O);var pe=M(O,2);V(pe,()=>e.settings??_t),f(k),Y(()=>L(Me,"title",g()?"replies will load automatically when scrolled intersect":"replies are not loaded until you request them")),ua(le,g),J(3,k,()=>K),b(D,k)};S(Mt,D=>{l()&&D(pt)})}f(we),f(ne),Y((D,k)=>{ie=Ne(ne,1,"toot svelte-esn2at",null,ie,D),Ze=Ne(ke,1,"deselectable",null,Ze,k),ze.disabled=!s(p)},[()=>({replies:ee()}),()=>({selected:l()})]),J(3,ne,()=>K),b(j,ne)},$$slots:{default:!0}})}),b(t,N),$(z)}vt(["click"]);var fn=E('<header><h1 class="mt_xl5 mb_lg"> </h1> <p class="mb_xl5"><!></p></header>');function vn(t,e){Q(e,!0);var a=fn(),o=v(a),n=v(o,!0);f(o);var r=M(o,2),c=v(r);na(c,{get item(){return e.item}}),f(r),f(a),Y(()=>Z(n,e.item.title)),b(t,a),$()}const _n=t=>{var e=mn();b(t,e)};var mn=E("<hr/>"),hn=E("<!>  <section><h2>Comments</h2> <!></section> <!>",1),gn=E("<article><!> <!> <!> <!></article>"),bn=E("<div>cannot find post <code> </code></div>"),yn=E('<div class="blog_post width_md"><!></div>');function wn(t,e){Q(e,!0);const a=I(e,"separator",3,_n),n=ia.get().items.find(u=>u.slug===e.post.slug),r=fa.maybe_get();var c=yn();Gt(u=>{Y(()=>Jt.title=e.post.title)});var i=v(c);{var l=u=>{var g=gn();ge(g,()=>({...e.attrs}));var h=v(g);vn(h,{get item(){return n}});var d=M(h,2);V(d,()=>e.children);var m=M(d,2);V(m,()=>e.footer??_t);var x=M(m,2);{var y=T=>{var B=hn(),p=W(B);V(p,a);var z=M(p,2),N=M(v(z),2);{var C=F=>{{let j=w(()=>r?.data);un(F,{get url(){return n.comments.url},include_replies:!0,initial_autoload:!0,reply_filter:P=>({type:"favourited_by",favourited_by:[P.account.acct]}),get settings_storage_key(){return`${n.id??""}_comments_settings`},get cache(){return s(j)}})}};S(N,F=>{(!r||r.data!==void 0)&&F(C)})}f(z);var R=M(z,2);V(R,a),b(T,B)};S(x,T=>{n.comments&&T(y)})}f(g),b(u,g)},_=u=>{var g=bn(),h=M(v(g)),d=v(h,!0);f(h),f(g),Y(()=>Z(d,e.post.slug)),b(u,g)};S(i,u=>{n?u(l):u(_,!1)})}f(c),b(t,c),$()}var xn=E('<footer class="svelte-px1qsd"><div class="panel p_lg"><p><span>find me on <a href="https://joinmastodon.org/">Mastodon</a> and <a href="https://wikipedia.org/wiki/ActivityPub">ActivityPub</a>:</span> <br/> <a href="https://hci.social/@ryanatkn">@ryanatkn@hci.social</a></p></div></footer>');function kn(t){var e=xn();b(t,e)}const Dn={title:"Hello fuz_blog",slug:"hello-fuz-blog",date_published:"2024-07-10T16:04:49.688Z",date_modified:"2024-07-15T18:27:36.477Z",summary:"fuz_blog is now a reusable library",tags:["blog software","sveltekit"],comments:{url:"https://fosstodon.org/@ryanatkn/114422499177310600",type:"mastodon"}};var Mn=E(`<section><p>This is <code>fuz_blog</code>'s first blog post. <code>fuz_blog</code> is a reusable SvelteKit library for adding blogs to your repos. It works!</p> <p>The source code is <a href="https://github.com/ryanatkn/fuz_blog">here on GitHub</a>.</p> <p>To watch me create this project from an older messier codebase, see this <a href="https://www.youtube.com/watch?v=j1qTO5xolC4&amp;list=PLio_5jgyVNVm0nMXojbEP7vQOEakA8n4X&amp;index=1">video and playlist</a>. The code is at <a href="https://github.com/ryanatkn/fuz_blog/pull/1">PR #1</a>.</p></section>`);function Rn(t){wn(t,{get post(){return Dn},footer:a=>{kn(a)},children:(a,o)=>{var n=Mn();b(a,n)},$$slots:{footer:!0,default:!0}})}export{Rn as component};
