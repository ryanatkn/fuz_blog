import"../chunks/DsnmJJEf.js";import{h as De,v as Me,m as ze,k as Te,p as tt,f as D,d,r as i,s as p,J as o,ax as Yt,an as re,b as y,c as et,G as ot,a as $,K as b,t as B,e as W,aD as ie,bn as Ut,bl as Ee,Y as ft,Z as Ct,am as Pe,a0 as Ot,bo as Se,X as le,_ as je,$ as Ie}from"../chunks/5sHI4z7y.js";import{s as G}from"../chunks/Be00QT_w.js";import{i as P}from"../chunks/BkimrniL.js";import{h as Ae}from"../chunks/BvIrBcBY.js";import{a as mt,C as Oe,c as He,s as Y,d as ce,b as Re,S as Kt,i as de,f as Ft,g as Ce,r as Fe}from"../chunks/X06PAP1I.js";import{r as ue,p as E}from"../chunks/D-ZnMtR_.js";import{k as Le}from"../chunks/BMePnEFd.js";import{t as Z,s as Q,b as Ye,a as Ue}from"../chunks/CATHIgiv.js";import{b as Xe}from"../chunks/DgDLcui_.js";import{P as Be}from"../chunks/ROp_kYYN.js";import{i as Ne}from"../chunks/DtORj4MU.js";import{h as Ht}from"../chunks/D6kmtZe0.js";import{a as st,n as Xt,g as Zt,b as Ge,e as Je,m as Qt,c as Mt,f as Rt,F as Ve}from"../chunks/CWyFLCqp.js";import{E as qe}from"../chunks/C7lgd2ss.js";import{s as zt,o as Ke,d as Wt,m as Ze}from"../chunks/D2CV7Ygs.js";import{c as Qe}from"../chunks/DnlqBELn.js";import{b as We}from"../chunks/DIqBGPd4.js";function $e(e,t){De&&Me(ze(e)),Te(()=>{var a=t();for(var n in a){var s=a[n];s?e.style.setProperty(n,s):e.style.removeProperty(n)}})}const ta=Qe();function Tt(e,t){const a=+st(e)-+st(t);return a<0?-1:a>0?1:a}function ea(e,t,a){const[n,s]=Xt(a?.in,e,t),r=n.getFullYear()-s.getFullYear(),l=n.getMonth()-s.getMonth();return r*12+l}function aa(e){return t=>{const a=Math.trunc,n=a(t);return n===0?0:n}}function oa(e,t){return+st(e)-+st(t)}function sa(e,t){const a=st(e,t?.in);return a.setHours(23,59,59,999),a}function na(e,t){const a=st(e,t?.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function ra(e,t){const a=st(e,t?.in);return+sa(a,t)==+na(a,t)}function ia(e,t,a){const[n,s,r]=Xt(a?.in,e,e,t),l=Tt(s,r),u=Math.abs(ea(s,r));if(u<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-l*u);let c=Tt(s,r)===-l;ra(n)&&u===1&&Tt(n,r)===1&&(c=!1);const f=l*(u-+c);return f===0?0:f}function la(e,t,a){const n=oa(e,t)/1e3;return aa()(n)}function $t(e,t,a){const n=Ge(),s=a?.locale??n.locale??Je,r=2520,l=Tt(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:l}),[c,f]=Xt(a?.in,...l>0?[t,e]:[e,t]),m=la(f,c),g=(Zt(f)-Zt(c))/1e3,_=Math.round((m-g)/60);let w;if(_<2)return _===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",_,u);if(_<45)return s.formatDistance("xMinutes",_,u);if(_<90)return s.formatDistance("aboutXHours",1,u);if(_<Qt){const h=Math.round(_/60);return s.formatDistance("aboutXHours",h,u)}else{if(_<r)return s.formatDistance("xDays",1,u);if(_<Mt){const h=Math.round(_/Qt);return s.formatDistance("xDays",h,u)}else if(_<Mt*2)return w=Math.round(_/Mt),s.formatDistance("aboutXMonths",w,u)}if(w=ia(f,c),w<12){const h=Math.round(_/Mt);return s.formatDistance("xMonths",h,u)}else{const h=w%12,x=Math.trunc(w/12);return h<3?s.formatDistance("aboutXYears",x,u):h<9?s.formatDistance("overXYears",x,u):s.formatDistance("almostXYears",x+1,u)}}var ca=D('<span class="animation svelte-eax9wj"><!></span>'),da=D('<button><span class="content svelte-eax9wj"><!></span> <!></button>');function ua(e,t){tt(t,!0);const a=ue(t,["$$slots","$$events","$$legacy","pending","onclick","running","title","disabled","animation","children"]);let n=Yt(void 0);var r={focus:g=>o(n)?.focus(g)},l=da();mt(l,()=>({type:"button",...a,class:`pending_button ${t.class??""}`,disabled:t.disabled??t.pending,title:t.title,onclick:t.onclick,[Oe]:{pending:t.pending}}),void 0,void 0,void 0,"svelte-eax9wj");var u=d(l),c=d(u);G(c,()=>t.children),i(u);var f=p(u,2);{var m=g=>{var _=ca(),w=d(_);{var h=v=>{var S=ot(),j=$(S);G(j,()=>t.animation),y(v,S)},x=v=>{Be(v,{get running(){return t.running}})};P(w,v=>{t.animation?v(h):v(x,!1)})}i(_),y(g,_)};P(f,g=>{t.pending&&g(m)})}return i(l),Xe(l,g=>re(n,g),()=>o(n)),y(e,l),et(r)}var va=D('<div class="content panel p_md mb_lg svelte-wl68el"><!></div>'),_a=D("<details><summary> </summary><!></details>"),fa=D('<div class="mastodon_status_item svelte-wl68el"><header class="svelte-wl68el"><button type="button" class="avatar plain icon_button svelte-wl68el"><img class="icon svelte-wl68el"/></button> <div class="names svelte-wl68el"><div class="name svelte-wl68el"><a> </a></div> <small class="svelte-wl68el"> </small> <small class="date svelte-wl68el"><a class="svelte-wl68el"> </a></small></div></header> <!> <div class="content svelte-wl68el"><!></div></div>');function Lt(e,t){tt(t,!0);const a=b(()=>t.item.created_at),n=b(()=>t.item.edited_at),s=b(()=>t.item.content),r=b(()=>t.item.account),l=b(()=>t.item.url),u=b(()=>t.item.sensitive),c=b(()=>t.item.spoiler_text),f=b(()=>o(r).created_at),m=b(()=>o(r).avatar_static),g=b(()=>o(r).url),_=b(()=>o(r).display_name),w=b(()=>o(r).followers_count),h=b(()=>o(r).following_count),x=b(()=>o(r).acct),v=b(()=>o(r).note),S=b(()=>Rt(new Date(o(f)),"PPpp")),j=b(()=>$t(new Date,new Date(o(a)))),z=b(()=>o(n)?Rt(new Date(o(n)),"PPpp"):null),H=b(()=>o(n)?$t(new Date,new Date(o(n))):null),F=b(()=>Rt(new Date(o(f)),"MMM yyyy"));let A=Yt(!1);const L=()=>{re(A,!o(A))};var U=fa(),R=d(U),T=d(R);T.__click=function(...O){(o(v)?L:void 0)?.apply(this,O)};var X=d(T);i(T);var J=p(T,2),nt=d(J),at=d(nt),ht=d(at,!0);i(at),i(nt);var rt=p(nt,2),gt=d(rt,!0);i(rt);var V=p(rt,2),it=d(V),ut=d(it);i(it),i(V),i(J),i(R);var vt=p(R,2);{var Et=O=>{var C=va(),q=d(C);Ht(q,()=>o(v)),i(C),Z(3,C,()=>Q),y(O,C)};P(vt,O=>{o(A)&&o(v)&&O(Et)})}var lt=p(vt,2),yt=d(lt);{var Pt=O=>{var C=_a(),q=d(C),bt=d(q,!0);i(q);var jt=p(q);Ht(jt,()=>o(s)),i(C),B(()=>W(bt,o(c)||"view sensitive content")),y(O,C)},St=O=>{var C=ot(),q=$(C);Ht(q,()=>o(s)),y(O,C)};P(yt,O=>{o(u)?O(Pt):O(St,!1)})}i(lt),i(U),B(O=>{Y(T,"title",o(v)?`${o(A)?"hide":"show"} ${o(x)}'s profile`:void 0),T.disabled=!o(v),Y(T,"aria-label",o(v)?`${o(A)?"hide":"show"} ${o(x)}'s profile`:void 0),Y(X,"src",o(m)),Y(X,"alt",`avatar for ${o(x)??""}`),Y(at,"href",o(g)),Y(at,"title",O),W(ht,o(_)),Y(rt,"title",`following ${o(h)??""}, ${o(w)??""} followers`),W(gt,o(x)),Y(V,"title",`posted ${o(S)??""}${o(z)?`, edited ${o(z)}`:""}, joined ${o(F)??""}`),Y(it,"href",o(l)),W(ut,`${o(j)??""} ago${o(H)?`, edited ${o(H)} ago`:""}`)},[()=>He(o(g),"https://")]),y(e,U),et()}ie(["click"]);var ma=D('<li class="svelte-lw2ink"><!> <!></li>'),ha=D('<ul class="mastodon_status_tree unstyled svelte-lw2ink"></ul>');function ve(e,t){tt(t,!0);const a=b(()=>t.item.id),n=b(()=>t.items.filter(u=>u.in_reply_to_id===o(a)));var s=ot(),r=$(s);{var l=u=>{var c=ha();ce(c,21,()=>o(n),f=>f.id,(f,m)=>{var g=ma(),_=d(g);Lt(_,{get item(){return o(m)}});var w=p(_,2);ve(w,{get item(){return o(m)},get items(){return t.items}}),i(g),y(f,g)}),i(c),y(u,c)};P(r,u=>{o(n).length&&u(l)})}y(e,s),et()}const ga=e=>JSON.stringify(e,(t,a)=>{if(a!==null&&typeof a=="object"&&!Array.isArray(a)){const n={},s=Object.keys(a).sort();for(const r of s)n[r]=a[r];return n}return a}),te="application/vnd.github+json",ya="2022-11-28",Bt=async(e,t)=>{const{request:a,params:n,parse:s,token:r,cache:l,return_early_from_cache:u,log:c,fetch:f=globalThis.fetch}=t??qe,m=typeof e=="string"?new URL(e):e,g=m.href,_=a?.method??(n?"POST":"GET");let w,h;if(l&&(h=pa(g,n,_),w=l.get(h),u&&w))return c?.info("[fetch_value] cached locally and returning early",g),c?.debug("[fetch_value] cached value",w),{ok:!0,value:w.value,headers:ee(w)};const x=a?.body??(_==="GET"||_==="HEAD"?null:JSON.stringify(n??{})),v=new Headers(a?.headers);v.has("accept")||v.set("accept",m.hostname==="api.github.com"?te:"application/json"),v.get("accept")===te&&!v.has("x-github-api-version")&&v.set("x-github-api-version",ya),x&&!v.has("content-type")&&v.set("content-type","application/json"),r&&!v.has("authorization")&&v.set("authorization","Bearer "+r);const S=w?.etag;if(S&&!v.has("if-none-match"))v.set("if-none-match",S);else{const L=w?.last_modified;L&&!v.has("if-modified-since")&&v.set("if-modified-since",L)}const j=new Request(m,{...a,headers:v,method:_,body:x});c?.info("[fetch_value] fetching url with headers",e),c?.debug("[fetch_value] fetching with headers",ba(v));const z=await f(j);if(c?.info("[fetch_value] fetched",e,z.status,wa(z.headers)),c?.debug("[fetch_value] fetched",Object.fromEntries(z.headers.entries())),z.status===429)throw Error("ratelimited exceeded fetching url "+e);if(z.status===304){if(!w)throw Error("unexpected 304 status without a cached value");return c?.info("[fetch_value] cache hit",e),{ok:!0,value:w.value,headers:ee(w)}}if(!z.ok)return{ok:!1,status:z.status,message:z.statusText};const H=z.headers.get("content-type"),F=await(!H||H.includes("json")?z.json():z.text()),A=s?s(F):F;if(c?.debug("[fetch_value] fetched json",e,A),h){const L={key:h,url:g,params:n,value:A,etag:z.headers.get("etag"),last_modified:z.headers.get("etag")?null:z.headers.get("last-modified")};l.set(h,L)}return{ok:!0,value:A,headers:z.headers}},ee=e=>{const t=new Headers;return e.etag&&t.set("etag",e.etag),e.last_modified&&t.set("last-modified",e.last_modified),t},ba=e=>{const t=Object.fromEntries(e.entries());return t.authorization&&(t.authorization="[REDACTED]"),t},wa=e=>{const t=e.get("x-ratelimit-limit"),a=e.get("x-ratelimit-remaining");return t||a?`ratelimit ${a} of ${t}`:""},_e=zt(),xa=Ke({key:_e,url:zt(),params:Wt(),value:Wt(),etag:zt().nullable(),last_modified:zt().nullable()});Ze(_e,xa);const ae="::",pa=(e,t,a)=>{let n=a+ae+e;return t!=null&&(n+=ae+ga(t)),n};class ka extends Error{constructor(t,a=`Unreachable case: ${t}`,n){super(a,n)}}const Da=e=>Array.isArray(e)?e:[e],Ma=(e,t)=>`https://${e}/api/v1/statuses/${t}`,za=(e,t)=>`https://${e}/api/v1/statuses/${t}/context`,Ta=(e,t)=>`https://${e}/api/v1/statuses/${t}/favourited_by`,fe=e=>{try{const t=new URL(e),a=Re(t.pathname,"/context").split("/").filter(Boolean),n=a[0]?.[0]==="@"?a[0].substring(1):null;if(!n)return null;const s=a.length>1?a[a.length-1]:null;return s?{href:e,host:t.host,author:n,status_id:s}:null}catch{return null}},Ea=async(e,t,a,n,s,r,l)=>{const u=za(e,t),c=await Bt(u,{request:s,token:r,cache:a,return_early_from_cache:Ut,log:n,fetch:l});return c.ok?c.value:null},Pa=async(e,t,a,n,s,r,l)=>{const u=Ma(e,t),c=await Bt(u,{request:s,token:r,cache:a,return_early_from_cache:Ut,log:n,fetch:l});return c.ok?c.value:null},Sa=async(e,t,a,n,s,r,l)=>{const u=Ta(e,t),c=await Bt(u,{request:s,token:r,cache:a,return_early_from_cache:Ut,log:n,fetch:l});return c.ok?c.value:null},ja=async(e,t,a,n,s)=>{const r=a?Da(a):null,l=t.descendants;if(!l.length||!r?.length)return[];const u=new URL(e.url).host,c=new Set;for(const f of l)for(const m of r)if(m.type==="favourited_by"){if(!f.favourites_count)continue;if((await Sa(u,f.id,n,s))?.find(w=>m.favourited_by.includes(w.acct))){c.add(f.id);break}}else if(m.type==="minimum_favourites"){if(f.favourites_count>=m.minimum_favourites){c.add(f.id);break}}else if(m.type==="custom"){if(m.should_include(f,e,t)){c.add(f.id);break}}else throw new ka(m);return l.filter(f=>c.has(f.id)?f:null)};function Ia(e,t){tt(t,!0);let a=E(t,"include_ancestors",3,!1),n=E(t,"include_replies",3,!1),s=E(t,"loading",15),r=E(t,"item",15),l=E(t,"status_context",15),u=E(t,"replies",15),c=E(t,"load_time",15);const f=b(()=>a()||n()),m=b(()=>t.reply_filter===void 0?n()?{type:"custom",should_include:()=>!0}:null:t.reply_filter),g=async()=>{if(!t.host||!t.id)return;const h=performance.now();s(!0),await(async x=>{var v=Ee(x,2);r(v[0]),l(v[1])})(await Promise.all([Pa(t.host,t.id,t.cache,t.log),o(f)?Ea(t.host,t.id,t.cache,t.log):null])),r()&&l()?u(await ja(r(),l(),typeof o(m)=="function"?o(m)(r(),l()):o(m),t.cache,t.log)):u(null),s(!1),c(performance.now()-h)};var _=ot(),w=$(_);G(w,()=>t.children,()=>({item:r(),status_context:l(),replies:u(),load:g,loading:s(),load_time:c()})),y(e,_),et()}const oe=(e,t,a)=>{try{const n=localStorage.getItem(e);if(!n)return t();const s=JSON.parse(n);return a?.(s),s}catch{try{localStorage.removeItem(e)}catch{}return t()}},se=(e,t)=>{try{t===void 0?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t))}catch{}},ne={inform:{color:"var(--text_color_3)",icon:"âœ»"},help:{color:"var(--color_b_5)",icon:"âžº"},error:{color:"var(--color_c_5)",icon:"!?"}};var Aa=D('<div class="icon svelte-9lbevi"><!></div>'),Oa=D('<!> <div class="content svelte-9lbevi"><!></div>',1),Ha=D("<button><!></button>"),Ra=D("<div><!></div>");function Ca(e,t){tt(t,!0);const a=h=>{var x=Oa(),v=$(x);{var S=H=>{var F=Aa(),A=d(F);{var L=R=>{var T=ft();B(()=>W(T,o(f))),y(R,T)},U=R=>{var T=ot(),X=$(T);G(X,()=>t.icon,()=>o(f)),y(R,T)};P(A,R=>{!t.icon||typeof t.icon=="string"?R(L):R(U,!1)})}i(F),y(H,F)};P(v,H=>{t.icon!==null&&H(S)})}var j=p(v,2),z=d(j);G(z,()=>t.children),i(j),y(h,x)},n=E(t,"status",3,"inform"),s=ue(t,["$$slots","$$events","$$legacy","status","color","onclick","disabled","icon","children"]),r=b(()=>ne[n()]),l=b(()=>o(r).color),u=b(()=>o(r).icon),c=b(()=>t.color??o(l)),f=b(()=>typeof t.icon=="string"?t.icon:o(u)??ne.inform.icon);var m=ot(),g=$(m);{var _=h=>{var x=Ha();mt(x,()=>({type:"button",...s,class:`alert ${t.class??""}`,onclick:t.onclick,disabled:t.disabled,[Kt]:{"--text_color":o(c)}}),void 0,void 0,void 0,"svelte-9lbevi");var v=d(x);a(v),i(x),y(h,x)},w=h=>{var x=Ra();mt(x,()=>({role:"alert",...s,class:`alert panel ${t.class??""}`,[Kt]:{"--text_color":o(c)}}),void 0,void 0,void 0,"svelte-9lbevi");var v=d(x);a(v),i(x),y(h,x)};P(g,h=>{t.onclick?h(_):h(w,!1)})}y(e,m),et()}var Fa=D("<div><!></div>"),La=D('<fieldset><div><label title="where to load the toot" class="flex_1 row"><a class="icon_button box mr_lg">ðŸ”—</a> <input/></label></div> <!></fieldset>');function Ya(e,t){tt(t,!0);let a=E(t,"url",15);const n=b(()=>fe(a())),s=b(()=>!!(a()&&!o(n)));var r=La(),l=d(r);let u;var c=d(l),f=d(c);de(f,"",{},{"font-size":"var(--font_size_xl)"});var m=p(f,2),g=h=>h.currentTarget.select();mt(m,()=>({placeholder:"> toot url",onfocus:g,...t.attrs}),void 0,void 0,void 0,void 0,!0),i(c),i(l);var _=p(l,2);{var w=h=>{var x=Fa(),v=d(x);Ca(v,{status:"error",children:(S,j)=>{Ct();var z=ft("invalid Mastodon status url");y(S,z)},$$slots:{default:!0}}),i(x),Z(3,x,()=>Q),y(h,x)};P(_,h=>{o(s)&&h(w)})}i(r),B(()=>{u=Ft(l,1,"row",null,u,{mb_lg:o(s)}),Y(f,"href",a()||void 0)}),Ye(m,a),y(e,r),et()}var Ua=D("<div></div>"),Xa=D('<div class="transition_wrapper svelte-otzyot"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Ba=D('<div class="icon_button_content svelte-otzyot"><div class="icon svelte-otzyot">ðŸ¦£</div> <div class="button_content svelte-otzyot"><div>load toot<!> from</div> <code class="ellipsis"><!></code></div></div>'),Na=D('<div class="transition_wrapper svelte-otzyot"><!></div>'),Ga=D('<div class="pb_md"><a rel="noreferrer" class="display_block panel p_md"><span class="font_family_mono">â†ªï¸Ž</span> reply on Mastodon</a></div>'),Ja=D('<div class="loaded_message svelte-otzyot"> </div>'),Va=D(`<div class="settings controls panel svelte-otzyot"><form class="width_100"><div class="mb_lg"><!></div> <fieldset class="row"><label class="row"><input type="checkbox"/>automatically load when
										scrolled onscreen</label></fieldset></form> <!></div>`),qa=D('<div><div class="toot_content svelte-otzyot"><!> <div class="main_post panel svelte-otzyot"><div class="panel bg_panel svelte-otzyot"><!></div></div> <!></div> <!> <div class="toot_controls svelte-otzyot"><div class="controls svelte-otzyot"><div class="row"><button type="button">settings</button> <div class="reset svelte-otzyot"><button type="button">reset</button><!></div></div></div> <!></div></div>');function Ka(e,t){tt(t,!0);let a=E(t,"updated_url",31,()=>Pe(t.url)),n=E(t,"include_ancestors",3,!1),s=E(t,"include_replies",3,!1),r=E(t,"loading",15),l=E(t,"load_time",15),u=E(t,"initial_show_settings",3,!1),c=E(t,"show_settings",15),f=E(t,"autoload_storage_key",3,"autoload"),m=E(t,"initial_autoload",3,!1),g=E(t,"autoload",23,()=>f()?oe(f(),()=>m()):m()),_=Yt(1);const w=()=>{Se(_),a(t.url),r(void 0),l(void 0),t.onreset?.()},h=b(()=>t.settings_storage_key&&"show_settings"+t.settings_storage_key);Ot(()=>{c()===void 0&&c(o(h)?oe(o(h),()=>u()):u())}),Ot(()=>{o(h)&&se(o(h),c())});const x=()=>{c(!c())};Ot(()=>{f()&&se(f(),g())});const v=b(()=>fe(a())),S=b(()=>o(v)?.status_id??null),j=b(()=>o(v)?.host??null),z=b(()=>r()!==!1&&!!o(j)),H=b(()=>r()!==void 0||a()!==t.url);var F={reset:w},A=ot(),L=$(A);return Le(L,()=>o(_),U=>{Ia(U,{get host(){return o(j)},get id(){return o(S)},get include_ancestors(){return n()},get include_replies(){return s()},get cache(){return t.cache},get log(){return t.log},get reply_filter(){return t.reply_filter},get loading(){return r()},set loading(T){r(T)},get load_time(){return l()},set load_time(T){l(T)},children:(T,X)=>{let J=()=>X?.().item,nt=()=>X?.().status_context,at=()=>X?.().replies,ht=()=>X?.().load,rt=()=>X?.().loading,gt=()=>X?.().load_time;var V=qa();let it;var ut=d(V),vt=d(ut);{var Et=M=>{var k=Ua();ce(k,21,()=>nt().ancestors,I=>I.id,(I,K)=>{Lt(I,{get item(){return o(K)}})}),i(k),Z(3,k,()=>Q),y(M,k)};P(vt,M=>{n()&&nt()&&M(Et)})}var lt=p(vt,2),yt=d(lt),Pt=d(yt);{var St=M=>{var k=Xa(),I=d(k);$e(I,()=>({"--margin":"0"})),Lt(I.lastChild,{get item(){return J()}}),i(I),i(k),Z(3,k,()=>Q),y(M,k)},O=M=>{var k=Na(),I=d(k);{let K=b(()=>rt()||!1),At=b(()=>!o(z));ua(I,{get pending(){return o(K)},get disabled(){return o(At)},onclick:()=>ht()(),children:(pt,kt)=>{var ct=Ba(),Dt=p(d(ct),2),_t=d(Dt),be=p(d(_t));{var we=N=>{var dt=ft("s");y(N,dt)};P(be,N=>{(s()||n())&&N(we)})}Ct(),i(_t);var qt=p(_t,2),xe=d(qt);{var pe=N=>{var dt=ft();B(()=>W(dt,o(j))),y(N,dt)},ke=N=>{var dt=ft("invalid url");y(N,dt)};P(xe,N=>{o(j)?N(pe):N(ke,!1)})}i(qt),i(Dt),i(ct),y(pt,ct)},$$slots:{default:!0}})}i(k),Z(3,k,()=>Q),y(M,k)};P(Pt,M=>{J()?M(St):M(O,!1)})}i(yt),i(lt);var C=p(lt,2);{var q=M=>{ve(M,{get item(){return J()},get items(){return at()}})};P(C,M=>{J()&&at()&&M(q)})}i(ut);var bt=p(ut,2);{var jt=M=>{var k=Ga(),I=d(k);i(k),B(()=>Y(I,"href",J().url)),Z(3,k,()=>Q),y(M,k)};P(bt,M=>{J()&&M(jt)})}var Nt=p(bt,2),wt=d(Nt),Gt=d(wt),xt=d(Gt);xt.__click=x;let Jt;de(xt,"",{},{"margin-right":"var(--space_sm)"});var Vt=p(xt,2),It=d(Vt);It.__click=w;var me=p(It);{var he=M=>{var k=Ja(),I=d(k);i(k),B(K=>W(I,`loaded in ${K??""}ms`),[()=>Math.round(gt())]),Z(3,k,()=>Q),y(M,k)};P(me,M=>{gt()!==void 0&&M(he)})}i(Vt),i(Gt),i(wt),Ce(wt,()=>Ne(()=>({onintersect:({intersecting:M})=>{M&&g()&&ht()()},count:1})));var ge=p(wt,2);{var ye=M=>{var k=Va(),I=d(k),K=d(I),At=d(K);Ya(At,{get url(){return a()},set url(_t){a(_t)}}),i(K);var pt=p(K,2),kt=d(pt),ct=d(kt);Fe(ct),Ct(),i(kt),i(pt),i(I);var Dt=p(I,2);G(Dt,()=>t.settings??le),i(k),B(()=>Y(kt,"title",g()?"replies will load automatically when scrolled intersect":"replies are not loaded until you request them")),Ue(ct,g),Z(3,k,()=>Q),y(M,k)};P(ge,M=>{c()&&M(ye)})}i(Nt),i(V),B(()=>{it=Ft(V,1,"toot svelte-otzyot",null,it,{replies:at()}),Jt=Ft(xt,1,"deselectable",null,Jt,{selected:c()}),It.disabled=!o(H)}),Z(3,V,()=>Q),y(T,V)},$$slots:{default:!0}})}),y(e,A),et(F)}ie(["click"]);var Za=D('<header><h1 class="mt_xl5 mb_lg"> </h1> <p class="mb_xl5"><!></p></header>');function Qa(e,t){tt(t,!0);var a=Za(),n=d(a),s=d(n,!0);i(n);var r=p(n,2),l=d(r);Ve(l,{get item(){return t.item}}),i(r),i(a),B(()=>W(s,t.item.title)),y(e,a),et()}const Wa=e=>{var t=$a();y(e,t)};var $a=D("<hr/>"),to=D("<!>  <section><h2>Comments</h2> <!></section> <!>",1),eo=D("<article><!> <!> <!> <!></article>"),ao=D("<div>cannot find post <code> </code></div>"),oo=D('<div class="blog_post width_upto_md"><!></div>');function so(e,t){tt(t,!0);const a=E(t,"separator",3,Wa),s=We.get().items.find(m=>m.slug===t.post.slug),r=ta.get_maybe();var l=oo();Ae("rbljul",m=>{je(()=>{Ie.title=t.post.title??""})});var u=d(l);{var c=m=>{var g=eo();mt(g,()=>({...t.attrs}));var _=d(g);Qa(_,{get item(){return s}});var w=p(_,2);G(w,()=>t.children);var h=p(w,2);G(h,()=>t.footer??le);var x=p(h,2);{var v=S=>{var j=to(),z=$(j);G(z,a);var H=p(z,2),F=p(d(H),2);{var A=U=>{{let R=b(()=>r?.data);Ka(U,{get url(){return s.comments.url},include_replies:!0,initial_autoload:!0,reply_filter:T=>({type:"favourited_by",favourited_by:[T.account.acct]}),get settings_storage_key(){return`${s.id??""}_comments_settings`},get cache(){return o(R)}})}};P(F,U=>{(!r||r.data!==void 0)&&U(A)})}i(H);var L=p(H,2);G(L,a),y(S,j)};P(x,S=>{s.comments&&S(v)})}i(g),y(m,g)},f=m=>{var g=ao(),_=p(d(g)),w=d(_,!0);i(_),i(g),B(()=>W(w,t.post.slug)),y(m,g)};P(u,m=>{s?m(c):m(f,!1)})}i(l),y(e,l),et()}var no=D('<footer class="svelte-3u5v06"><div class="panel p_lg"><p><span>find me on <a href="https://joinmastodon.org/">Mastodon</a> and <a href="https://wikipedia.org/wiki/ActivityPub">ActivityPub</a>:</span> <br/> <a href="https://hci.social/@ryanatkn">@ryanatkn@hci.social</a></p></div></footer>');function ro(e){var t=no();y(e,t)}const io={title:"Hello fuz_blog",slug:"hello-fuz-blog",date_published:"2024-07-10T16:04:49.688Z",date_modified:"2024-07-15T18:27:36.477Z",summary:"fuz_blog is now a reusable library",tags:["blog software","sveltekit"],comments:{url:"https://fosstodon.org/@ryanatkn/114422499177310600",type:"mastodon"}};var lo=D(`<section><p>This is <code>fuz_blog</code>'s first blog post. <code>fuz_blog</code> is a reusable SvelteKit library for adding blogs to your repos. It works!</p> <p>The source code is <a href="https://github.com/fuzdev/fuz_blog">here on GitHub</a>.</p> <p>To watch me create this project from an older messier codebase, see this <a href="https://www.youtube.com/watch?v=j1qTO5xolC4&amp;list=PLio_5jgyVNVm0nMXojbEP7vQOEakA8n4X&amp;index=1">video and playlist</a>. The code is at <a href="https://github.com/fuzdev/fuz_blog/pull/1">PR #1</a>.</p></section>`);function Eo(e){so(e,{get post(){return io},footer:a=>{ro(a)},children:(a,n)=>{var s=lo();y(a,s)},$$slots:{footer:!0,default:!0}})}export{Eo as component};
