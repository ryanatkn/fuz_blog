import"./DsnmJJEf.js";import{p as A,a0 as P,J as t,ax as v,an as l,f as R,d as p,r as w,t as z,b as I,c as B,aB as X,aC as j,s as F,G as H,a as K,aD as M}from"./5sHI4z7y.js";import{s as S}from"./Be00QT_w.js";import{i as Q}from"./BkimrniL.js";import{s as V,f as W,i as Y}from"./X06PAP1I.js";import{b as N}from"./DgDLcui_.js";import{p as b}from"./D-ZnMtR_.js";import{w as Z}from"./59r5WCs9.js";import{o as $}from"./BhnvKACy.js";const ee=a=>{if(!a)return!1;const{tagName:e}=a;return e==="INPUT"&&a.type!=="hidden"||e==="TEXTAREA"||a.contentEditable==="true"||a.contentEditable===""},me=a=>{const e=a.closest("[contenteditable]");return e!==null&&e.contentEditable!=="false"},te=(a,e=!0,s=!0)=>(s&&a.preventDefault(),e?a.stopImmediatePropagation():a.stopPropagation(),a),_e=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}};var ae=R('<div class="teleport svelte-1w7t70l"><!></div>');function oe(a,e){A(e,!0);let s=v(void 0);P(()=>{t(s)&&e.to&&E(t(s),e.to)});let g=v(!1);const E=(c,i)=>{l(g,!0),i.appendChild(c),e.onmove?.(c,i)};$(()=>{t(s)?.parentNode?.removeChild(t(s))});var d=ae(),y=p(d);S(y,()=>e.children),w(d),N(d,c=>l(s,c),()=>t(s)),z(()=>V(d,"hidden",!t(g))),I(a,d),B()}var ne=R('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-8u0dsw"><div class="dialog_wrapper svelte-8u0dsw" role="none"><div class="dialog_bg svelte-8u0dsw" aria-hidden="true"></div> <div class="dialog_content svelte-8u0dsw"><!></div></div></div></div>');function pe(a,e){A(e,!0);const s=b(e,"layout",3,"centered"),g=b(e,"index",3,0),E=b(e,"active",3,!0),d=b(e,"content_selector",3,".pane"),y="body",c="fuz_dialog";let i=v(void 0);P(()=>{q(e.container)});const q=o=>{if(o)l(i,o,!0);else{const u=document.getElementById(c);if(u)l(i,u,!0);else{const n=document.querySelector(y);if(!n)throw Error(`Cannot find dialog root element with selector '${y}'`);l(i,document.createElement("div"),!0),t(i).id=c,t(i).style.display="contents",n.appendChild(t(i))}}};let h=v(void 0),m=v(void 0);const x=o=>{o&&te(o),e.onclose?.()},G=o=>{if(o.key==="Escape"&&!ee(o.target)){const u=t(h)?.parentElement,n=u?.parentElement?.children,_=Array.prototype.indexOf.call(n,u);(!n||_===n.length-1||_===-1)&&x(o)}};let C=v(!1);X("keydown",j,function(...o){(E()?G:void 0)?.apply(this,o)}),oe(a,{get to(){return t(i)},onmove:async()=>{await Z(),l(C,!0),t(h)?.focus()},children:(o,u)=>{var n=ne();let _,O;var k=p(n),T=p(k);T.__mousedown=r=>{const f=r.target;t(m)&&(t(m)===f||!t(m).contains(f)||d()&&!f.closest(d()))&&x(r)};var D=F(p(T),2),J=p(D);{var L=r=>{var f=H(),U=K(f);S(U,()=>e.children,()=>x),I(r,f)};Q(J,r=>{t(C)&&r(L)})}w(D),N(D,r=>l(m,r),()=>t(m)),w(T),w(k),w(n),N(n,r=>l(h,r),()=>t(h)),z(()=>{_=W(n,1,"dialog svelte-8u0dsw",null,_,{ready:t(C),layout_page:s()==="page"}),O=Y(n,"",O,{"z-index":100+g()})}),I(o,n)},$$slots:{default:!0}}),B()}M(["mousedown"]);export{pe as D,ee as a,me as b,_e as i,te as s};
